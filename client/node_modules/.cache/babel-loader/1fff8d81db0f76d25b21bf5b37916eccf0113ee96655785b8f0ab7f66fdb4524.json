{"ast":null,"code":"var _jsxFileName = \"/Users/kevin/Code/Repos/csgo-trading-app-v2/client/src/pages/Index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport Filter from \"../components/index/Filter\";\nimport Trades from \"../components/index/Trades\";\nimport Activity from \"../components/index/Activity\";\nimport '../styles/pages/Index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Index() {\n  _s();\n  const [data, setData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [offerData, setOfferData] = useState([]);\n  const [selectedCheckboxes, setSelectedCheckboxes] = useState([]);\n  const hasRendered = useRef(false);\n  const hasRenderedOffers = useRef(false);\n\n  // SSE to listen for CRUD updates to trades\n  useEffect(() => {\n    let events = null;\n    if (!hasRendered.current) {\n      events = new EventSource('http://localhost:4000/api/trades');\n      events.onmessage = event => {\n        const parsedData = JSON.parse(event.data);\n        setData(parsedData);\n      };\n      hasRendered.current = true;\n    }\n    return () => {\n      if (events) {\n        events.close();\n        hasRendered.current = false;\n      }\n    };\n  }, []);\n\n  // SSE to listen for CRUD updates to offers\n  useEffect(() => {\n    let offerEvents = null;\n    if (!hasRenderedOffers.current) {\n      offerEvents = new EventSource('http://localhost:4000/offers/all');\n      offerEvents.onmessage = event => {\n        const parsedData = JSON.parse(event.data);\n        setOfferData(offerData => offerData.concat(parsedData));\n      };\n      hasRenderedOffers.current = true;\n    }\n    return () => {\n      if (offerEvents) {\n        offerEvents.close();\n        hasRenderedOffers.current = false;\n      }\n    };\n  }, []);\n\n  // Update the filtered data based on the checkboxes selected\n  useEffect(() => {\n    if (selectedCheckboxes.length === 0) {\n      setFilteredData(data);\n      return;\n    }\n    const filteredItems = data.filter(trade => {\n      const haveItems = trade.have;\n      const wantItems = trade.want;\n      return haveItems.some(haveItem => selectedCheckboxes.includes(haveItem.knife)) || wantItems.some(wantItem => selectedCheckboxes.includes(wantItem.knife));\n    });\n    setFilteredData(filteredItems);\n  }, [selectedCheckboxes, data]);\n  const handleCheckboxChange = selectedItems => {\n    setSelectedCheckboxes(selectedItems);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left-sidebar\",\n      children: /*#__PURE__*/_jsxDEV(Filter, {\n        selectedCount: selectedCheckboxes.length,\n        onCheckboxChange: handleCheckboxChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: /*#__PURE__*/_jsxDEV(Trades, {\n        data: filteredData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"right-sidebar\",\n      children: /*#__PURE__*/_jsxDEV(Activity, {\n        data: offerData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n}\n_s(Index, \"KeRn3Gjo6xCs+yvj5Y34EwTdy3k=\");\n_c = Index;\nvar _c;\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Filter","Trades","Activity","jsxDEV","_jsxDEV","Index","_s","data","setData","filteredData","setFilteredData","offerData","setOfferData","selectedCheckboxes","setSelectedCheckboxes","hasRendered","hasRenderedOffers","events","current","EventSource","onmessage","event","parsedData","JSON","parse","close","offerEvents","concat","length","filteredItems","filter","trade","haveItems","have","wantItems","want","some","haveItem","includes","knife","wantItem","handleCheckboxChange","selectedItems","className","children","selectedCount","onCheckboxChange","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kevin/Code/Repos/csgo-trading-app-v2/client/src/pages/Index.jsx"],"sourcesContent":["import React, {useState, useEffect, useRef} from 'react';\nimport Filter from \"../components/index/Filter\";\nimport Trades from \"../components/index/Trades\";\nimport Activity from \"../components/index/Activity\";\nimport '../styles/pages/Index.css';\n\nexport default function Index() {\n    const [data, setData] = useState([]);\n    const [filteredData, setFilteredData] = useState([]);\n    const [offerData, setOfferData] = useState([]);\n    const [selectedCheckboxes, setSelectedCheckboxes] = useState([]);\n    const hasRendered = useRef(false);\n    const hasRenderedOffers = useRef(false);\n\n    // SSE to listen for CRUD updates to trades\n    useEffect(() => {\n        let events = null;\n\n        if (!hasRendered.current) {\n            events = new EventSource('http://localhost:4000/api/trades');\n\n            events.onmessage = (event) => {\n                const parsedData = JSON.parse(event.data);\n                setData(parsedData);\n            };\n            hasRendered.current = true;\n        }\n\n        return () => {\n            if (events) {\n                events.close();\n                hasRendered.current = false;\n            }\n        };\n    }, []);\n\n    // SSE to listen for CRUD updates to offers\n    useEffect(() => {\n        let offerEvents = null;\n\n        if (!hasRenderedOffers.current) {\n            offerEvents = new EventSource('http://localhost:4000/offers/all');\n\n            offerEvents.onmessage = (event) => {\n                const parsedData = JSON.parse(event.data);\n                setOfferData((offerData) => offerData.concat(parsedData));\n            };\n            hasRenderedOffers.current = true;\n        }\n\n        return () => {\n            if (offerEvents) {\n                offerEvents.close();\n                hasRenderedOffers.current = false;\n            }\n        };\n    }, []);\n\n    // Update the filtered data based on the checkboxes selected\n    useEffect(() => {\n        if (selectedCheckboxes.length === 0) {\n            setFilteredData(data);\n            return;\n        }\n\n        const filteredItems = data.filter((trade) => {\n            const haveItems = trade.have;\n            const wantItems = trade.want;\n\n            return (\n                haveItems.some((haveItem) => selectedCheckboxes.includes(haveItem.knife)) ||\n                wantItems.some((wantItem) => selectedCheckboxes.includes(wantItem.knife))\n            );\n        });\n\n        setFilteredData(filteredItems);\n    }, [selectedCheckboxes, data]);\n\n    const handleCheckboxChange = (selectedItems) => {\n        setSelectedCheckboxes(selectedItems);\n    };\n\n    return (\n        <div className=\"grid-container\">\n            <div className=\"left-sidebar\">\n                <Filter selectedCount={selectedCheckboxes.length}\n                        onCheckboxChange={handleCheckboxChange}/>\n            </div>\n            <div className=\"content\">\n                <Trades data={filteredData}/>\n            </div>\n            <div className=\"right-sidebar\">\n                <Activity data={offerData}/>\n            </div>\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}