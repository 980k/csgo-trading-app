{"ast":null,"code":"var _jsxFileName = \"/Users/kevin/Code/Repos/csgo-trading-app-v2/client/src/pages/Index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport Filter from \"../components/index/Filter\";\nimport Trades from \"../components/index/Trades\";\nimport Activity from \"../components/index/Activity\";\nimport '../styles/pages/Index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Index() {\n  _s();\n  const [data, setData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [selectedCheckboxes, setSelectedCheckboxes] = useState([]);\n  const hasRendered = useRef(false);\n  const hasRenderedOffers = useRef(false);\n  const [offerData, setOfferData] = useState([]);\n  useEffect(() => {\n    let events = null;\n    if (!hasRendered.current) {\n      events = new EventSource('http://localhost:4000/api/trades');\n      events.onmessage = event => {\n        const parsedData = JSON.parse(event.data);\n        setData(parsedData);\n        console.log(data);\n      };\n      hasRendered.current = true;\n    }\n    return () => {\n      if (events) {\n        events.close();\n        hasRendered.current = false;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    let offerEvents = null;\n    if (!hasRenderedOffers.current) {\n      offerEvents = new EventSource('http://localhost:4000/offers/all');\n      offerEvents.onmessage = event => {\n        const parsedData = JSON.parse(event.data);\n        console.log('Received Data:', parsedData);\n        setOfferData(offerData => offerData.concat(parsedData));\n        console.log('After:', offerData);\n      };\n      hasRenderedOffers.current = true;\n    }\n    return () => {\n      if (offerEvents) {\n        offerEvents.close();\n        hasRenderedOffers.current = false;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (selectedCheckboxes.length === 0) {\n      setFilteredData(data);\n      return;\n    }\n    const filteredItems = data.filter(trade => {\n      const haveItems = trade.have;\n      const wantItems = trade.want;\n      return haveItems.some(haveItem => selectedCheckboxes.includes(haveItem.knife)) || wantItems.some(wantItem => selectedCheckboxes.includes(wantItem.knife));\n    });\n    setFilteredData(filteredItems);\n  }, [selectedCheckboxes, data]);\n  const handleCheckboxChange = selectedItems => {\n    setSelectedCheckboxes(selectedItems);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left-sidebar\",\n      children: /*#__PURE__*/_jsxDEV(Filter, {\n        selectedCount: selectedCheckboxes.length,\n        onCheckboxChange: handleCheckboxChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: /*#__PURE__*/_jsxDEV(Trades, {\n        data: filteredData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"right-sidebar\",\n      children: /*#__PURE__*/_jsxDEV(Activity, {\n        data: offerData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n}\n_s(Index, \"HJdkvQWX0eUNV7YZgsudgJmhZlc=\");\n_c = Index;\nvar _c;\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Filter","Trades","Activity","jsxDEV","_jsxDEV","Index","_s","data","setData","filteredData","setFilteredData","selectedCheckboxes","setSelectedCheckboxes","hasRendered","hasRenderedOffers","offerData","setOfferData","events","current","EventSource","onmessage","event","parsedData","JSON","parse","console","log","close","offerEvents","concat","length","filteredItems","filter","trade","haveItems","have","wantItems","want","some","haveItem","includes","knife","wantItem","handleCheckboxChange","selectedItems","className","children","selectedCount","onCheckboxChange","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kevin/Code/Repos/csgo-trading-app-v2/client/src/pages/Index.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Filter from \"../components/index/Filter\";\nimport Trades from \"../components/index/Trades\";\nimport Activity from \"../components/index/Activity\";\nimport '../styles/pages/Index.css';\n\nexport default function Index() {\n    const [ data, setData ] = useState([]);\n    const [filteredData, setFilteredData] = useState([]);\n    const [selectedCheckboxes, setSelectedCheckboxes] = useState([]);\n    const hasRendered = useRef(false);\n    const hasRenderedOffers = useRef(false);\n    const [ offerData , setOfferData ] = useState([]);\n\n    useEffect(() => {\n        let events = null;\n\n        if (!hasRendered.current) {\n            events = new EventSource('http://localhost:4000/api/trades');\n\n            events.onmessage = (event) => {\n                const parsedData = JSON.parse(event.data);\n\n                setData(parsedData);\n                console.log(data);\n            };\n\n            hasRendered.current = true;\n        }\n\n        return () => {\n            if (events) {\n                events.close();\n                hasRendered.current = false;\n            }\n        };\n    }, []);\n\n    useEffect(() => {\n        let offerEvents = null;\n\n        if(!hasRenderedOffers.current) {\n            offerEvents = new EventSource('http://localhost:4000/offers/all');\n\n            offerEvents.onmessage = (event) => {\n                const parsedData = JSON.parse(event.data);\n\n                console.log('Received Data:', parsedData);\n\n                setOfferData((offerData) => offerData.concat(parsedData));\n\n                console.log('After:', offerData);\n\n            };\n\n            hasRenderedOffers.current = true;\n        }\n\n        return () => {\n            if(offerEvents) {\n                offerEvents.close();\n                hasRenderedOffers.current = false;\n            }\n        };\n    }, []);\n\n    useEffect(() => {\n        if (selectedCheckboxes.length === 0) {\n            setFilteredData(data);\n            return;\n        }\n\n        const filteredItems = data.filter((trade) => {\n            const haveItems = trade.have;\n            const wantItems = trade.want;\n\n            return (\n                haveItems.some((haveItem) => selectedCheckboxes.includes(haveItem.knife)) ||\n                wantItems.some((wantItem) => selectedCheckboxes.includes(wantItem.knife))\n            );\n        });\n\n        setFilteredData(filteredItems);\n    }, [selectedCheckboxes, data]);\n\n    const handleCheckboxChange = (selectedItems) => {\n        setSelectedCheckboxes(selectedItems);\n    };\n\n    return(\n        <div className=\"grid-container\">\n            <div className=\"left-sidebar\">\n                <Filter selectedCount={selectedCheckboxes.length}\n                        onCheckboxChange={handleCheckboxChange} />\n            </div>\n            <div className=\"content\" >\n                <Trades data={filteredData} />\n            </div>\n            <div className=\"right-sidebar\">\n                <Activity data={offerData} />\n            </div>\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}